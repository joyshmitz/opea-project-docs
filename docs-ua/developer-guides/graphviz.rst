.. _graphviz-examples:

Креслення за допомогою Graphviz
###############################

Ми підтримуємо використання розширення Sphinx `Graphviz`_ для створення простих графіків і лінійних малюнків за допомогою крапкової мови. 
Перевага використання Graphviz для креслень полягає в тому, що джерелом для креслення є текстовий файл, 
який можна редагувати і зберігати в репозиторії разом з документацією.

.. _graphviz extension: http://graphviz.gitlab.io

Ці вихідні ``.dot`` файли зазвичай зберігаються окремо від самого документа і включаються за допомогою директиви Graphviz:

.. code-block:: none

   .. graphviz:: images/boot-flow.dot
      :name: boot-flow-example
      :align: center
      :caption: Hypervisor Boot Flow

де файл boot-flow.dot містить команди малювання:

.. literalinclude:: images/boot-flow.dot

і згенерований вивід матиме вигляд:

.. graphviz:: images/boot-flow.dot
  :name: boot-flow-example
  :align: center
  :caption: Hypervisor Boot Flow


Давайте розглянемо ще кілька прикладів, а потім більш детально поговоримо про мову крапок і параметри малювання.

Простий орієнтовний граф
************************

Для простих малюнків з фігурами та лініями ви можете помістити команди Graphviz у блок вмісту директиви. 
Наприклад, для простого орієнтованого графа (диграфа) з двома вершинами, з'єднаними стрілкою, можна написати:


.. code-block:: none

    .. graphviz::

       digraph {
          "a" -> "b"
       }

і отримаєте цей малюнок:

.. graphviz::

   digraph {
      "a" -> "b"
   }


Ви можете змінити наступні атрибути:

* Розташування графіків (зверху вниз і зліва направо)
* Форми вузлів (прямокутники, кола, будинки, зірки тощо)
* Стиль (заповнений, закруглений)
* Кольори
* Текст, що відображається у вузлі
* Розміщення отриманого зображення на сторінці (по центру)

Приклад: 

.. literalinclude:: images/circle-square.dot

.. graphviz:: images/circle-square.dot
   :align: center

Ви можете використовувати `стандартні назви кольорів HTML`_ або використовувати значення RGB для кольорів, як показано нижче.

.. _standard HTML color names:
   https://www.w3schools.com/colors/colors_hex.asp

Додавання крайових міток
************************

Ось приклад креслення з підписами на ребрах (стрілками) між вузлами. Ми також покажемо, як змінити атрибути за замовчуванням для всіх вершин і ребер у цьому графі:

.. literalinclude:: images/node-shape-edges.dot

.. graphviz:: images/node-shape-edges.dot
   :align: center

Таблиці
*******

Для вузлів з атрибутом форми ``record`` текст мітки
представлено у форматі таблиці: вертикальна риска ``|`` починає новий рядок або
стовпець, а фігурні дужки ``{ ... }`` задають новий рядок (якщо ви знаходитесь у
стовпця) або новий стовпець (якщо ви знаходитесь у рядку).  Наприклад:

.. literalinclude:: images/record.dot

.. graphviz:: images/record.dot
   :align: center

Зверніть увагу, що ви також можете вказати горизонтальне вирівнювання тексту
за допомогою екранованих послідовностей ``\n``, ``\l`` і ``\r``, 
які розділяють мітку на рядки, вирівняні по центру, по лівому краю і по правому краю відповідно.

Закінчений стан машини
**********************

Ось приклад використання Graphviz для визначення закінченого стану машини для перекачування газу:

.. literalinclude:: images/gaspump.dot

.. graphviz:: images/gaspump.dot
   :align: center
